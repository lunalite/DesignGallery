<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
          content="Mobile UI Gallery search page. Search for widgets used by other developers. The repository has a total of 30,000 widgets used by Android developers, and are gleaned from the Google Play Store.">
    <meta name="keywords"
          content="mobile, mobile ui, mobile widgets, widget, widgets, mobile application, android, android widget, android widgets, android ui, ui">
    <meta name="author" content="">

    <title><%= title %></title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="stylesheets/style.css" rel="stylesheet">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117332758-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-117332758-2');
    </script>
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/">Mobile UI Gallery</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#">Search
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<!-- Page Content -->
<div class="container">
    <h2 class="my-4 text-center text-lg-left">Widget Search</h2>
    <hr/>
    <form method="get" id="myform" action="search">
        Find widgets with the following properties:<br><br>
        <h4> Type of widget </h4>
        <select class="custom-select" id="btnType" name="btnType">
            <% if (!query.hasOwnProperty('btnType')) { %>
            <option disabled selected value> -- select an option --</option>
            <% } else { %>
            <option disabled value> -- select an option --</option>
            <% }
            var btnTypeArr = ["CheckBox", "Chronometer", "CompoundButton", "EditText", "ImageButton", "ProgressBar", "RadioButton", "RatingBar", "SeekBar", "Spinner", "Switch", "ToggleButton", "View"];
            for (var i = 0; i < btnTypeArr.length; i++) {
            if (query.btnType === btnTypeArr[i]) { %>
            <option selected> <%= btnTypeArr[i] %></option>
            <% }else { %>
            <option> <%= btnTypeArr[i] %></option>
            <% }
            } %>
        </select><br><br>
        <!-- <h4> Color </h4> -->
        <!-- <h4> Application Category </h4> -->
        <input type="hidden" name="page" value="1">

        <h4> Sort By </h4>
        <select class="custom-select" id="sortType" name="sortType">
            <% if (!query.hasOwnProperty('sortType')) { %>
            <option disabled selected value> -- select an option --</option>
            <% } else { %>
            <option disabled value> -- select an option --</option>
            <% }
            var sortTypeArr = ["appDownloads", "appAlpbAsc"];
            for (var i = 0; i < sortTypeArr.length; i++) {
            if (query.sortType === sortTypeArr[i]) { %>
            <option selected> <%= sortTypeArr[i] %></option>
            <% }else { %>
            <option> <%= sortTypeArr[i] %></option>
            <% }
            } %>
        </select><br><br>

        <div class="form-group">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    <hr/>

    <section class="image-grid">
        <% for(i = 0; i < widgets.length; i ++) {
        var btnSize = widgets[i].dimensions['width'] + 'x' + widgets[i].dimensions['height'];%>
        <article class="image__cell is-collapsed">
            <div class="image--basic" style="height:100px">
                <a href="#expand-jump-<%=i%>">
                    <img id="expand-jump-<%=i%>" class="basic__img" src="https://storage.googleapis.com/ui-collection-gcs/widgets/<%=query.btnType + '/' + widgets[i].name +'.png'%>" style="max-height:100px;" />
                </a>
            </div>
            <div class="arrow--up"></div>
            <div class="image--expand">
                <div class="modal-body row">
                    <div class="col-md-5">
                        <img class="image--large" src="https://storage.googleapis.com/ui-collection-gcs/widgets/<%=query.btnType + '/' + widgets[i].name +'.png'%>" style="max-height:450px"/>
                        <p align="center" style="color:grey"><%=btnSize%></p>
                    </div>
                    <div class="col-md-5">
                        <table cellpadding="0" cellspacing="0" border="0">
                        <tr>
                            <td><b>Application: </b></td>
                            <td><a href="<%=widgets[i].url%>"><%=widgets[i].application_name%></a></td>
                        </tr>
                        <tr>
                            <td><b>Package: </b></td>
                            <td><%=widgets[i].package_name%></td>
                        </tr>
                        <tr>
                            <td><b>Text: </b></td>
                            <td><%=widgets[i].text%></td>
                        </tr>
                        <tr>
                            <td><b>Class: </b></td>
                            <td><%=widgets[i].widget_class%></td>
                        </tr>
                        <tr>
                            <td><b>Coordinates:&emsp;</b></td>
                            <td>[<%=widgets[i].coordinates['from']%>] [<%=widgets[i].coordinates['to']%>]</td>
                        </tr>
                        <tr>
                            <td><b>Color: </b></td>
                            <td> <%=widgets[i].color%></td>
                        </tr>
                        <tr>
                            <td><b>Downloads:</b></td>
                            <td><%=widgets[i].downloads%></td>
                        </tr>
                        </table>
                    </div>
                    <div>
                        <a href="#close-jump-' + i + '" class="expand__close"></a>
                    </div>
                </div>
            </div>
        </article>
        <% } %>

    </section>


</div>
<!-- /.container -->

<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Mobile UI Gallery 2018</p>
    </div>
</footer>

<!-- Bootstrap core JavaScript -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<script>
var $cell = $('.image__cell');

$cell.find('.image--basic').click(function () {
    var $thisCell = $(this).closest('.image__cell');

    if ($thisCell.hasClass('is-collapsed')) {
        $cell.not($thisCell).removeClass('is-expanded').addClass('is-collapsed');
        $thisCell.removeClass('is-collapsed').addClass('is-expanded');
    } else {
        $thisCell.removeClass('is-expanded').addClass('is-collapsed');
    }
});

$cell.find('.expand__close').click(function () {

    var $thisCell = $(this).closest('.image__cell');

    $thisCell.removeClass('is-expanded').addClass('is-collapsed');
});
</script>
</body>
</html>
